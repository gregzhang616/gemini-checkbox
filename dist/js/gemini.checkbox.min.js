!function(e,c){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(c)}(function(e){function c(e,c){var a=[];return Array.from?Array.from(e).slice(c||0):("number"!=typeof c||isNaN(c)||a.push(c),a.slice.apply(e,a))}function a(e){return"object"==typeof e&&e instanceof Array}function n(e){return"string"==typeof e}function t(e){return"boolean"==typeof e}var l=function(c,l){var i=this,s={defaults:{name:"",checklist:"",disabled:null,defaultValue:null,size:"small",onClick:null,onChange:null},init:function(){i=e.extend(!0,i,s.defaults,l||{}),null!==i.defaultValue&&(i.value=i.defaultValue),s.created()},created:function(){var a=s.generateChkDOM();i.$element=e(a).insertAfter(c),i.type=i.$element.hasClass("gmi-check-group")?"group":"single",i.$inputs=i.$element.find('input[type="checkbox"]'),c.hide(),s.cacheCheckItemData(),null!==i.disabled&&s.disableChkItem(),e.isFunction(i.onChange)&&c.on("change.checkbox",i.onChange),null!==i.defaultValue&&s.setValue(i.value),s.bindEvent()},unCreated:function(){var e=i.$element;e&&e.length>0&&e.remove()},bindEvent:function(){i.$element.on("click.checkbox",function(c){var a=e(c.target),n=a.parents(".gmi-check-label").eq(0),t=i.type,l=a.is("em.gmi-check-label__icon")?a:a.siblings("em.gmi-check-label__icon"),o=a.siblings('input[type="checkbox"]');return!n.hasClass("disabled")&&(!("group"===t&&a.is(".gmi-check-group")||"single"===t&&a.is(".gmi-check-label"))&&(o.prop("checked",!o.prop("checked")),o.prop("checked")?l.addClass("checked"):l.removeClass("checked"),s.changeItem(o),!1))}),e.isFunction(i.onClick)&&c.on("click.checkbox",i.onClick)},unBindEvent:function(){c.off("click.checkbox",i.onClick),c.off("change.checkbox",i.onChange)},generateChkDOM:function(){var c,t,l=i.checklist,s=i.name,o="small"===i.size?"":i.size;if(n(l))t="",t+='<label class="gmi-check-label '+o+'"><input type="checkbox" class="gmi-check-label__chk" name="'+s+'" autocomplete="off"><em class="gmi-check-icon-checked gmi-check-label__icon"></em><span class="gmi-check-label__text">'+l+"</span></label>";else if(a(l)&&l.length>0){var h=l.length;if(t='<div class="gmi-check-group '+o+'">',n(l[0]))for(var u=0;u<h;u++)c=l[u],t+='<label class="gmi-check-label"><input type="checkbox" class="gmi-check-label__chk" name="'+s+'" autocomplete="off" value="'+c+'"><em class="gmi-check-icon-checked gmi-check-label__icon"></em><span class="gmi-check-label__text">'+c+"</span></label>";else if(e.isPlainObject(l[0]))for(var r=0;r<h;r++)c=l[r],t+='<label class="gmi-check-label"><input type="checkbox" class="gmi-check-label__chk" name="'+s+'" autocomplete="off" value="'+c.value+'"><em class="gmi-check-icon-checked gmi-check-label__icon"></em><span class="gmi-check-label__text">'+c.label+"</span></label>";t+="</div>"}return t},cacheCheckItemData:function(){var e=i.checklist;if(n(e))i.$inputs.data("dt-chk",e);else if(a(e))for(var c=0;c<e.length;c++){var t=e[c];i.$inputs.eq(c).data("dt-chk",t)}},disableChkItem:function(){var c=i.$inputs,l=i.type,s=void 0===arguments[0]?i.disabled:arguments[0];if(i.$element.find(".gmi-check-label").removeClass("disabled"),t(s)&&"single"===l)s&&c.parents(".gmi-check-label").eq(0).addClass("disabled");else if(a(s)&&s.length>0&&"group"===l)for(var o=0;o<s.length;o++){var h=s[o];c.each(function(){var c,a=e(this).data("dt-chk");n(a)?c=a:e.isPlainObject(a)&&(c=a.value),h===c&&e(this).parents(".gmi-check-label").eq(0).addClass("disabled")})}},triggerEvent:function(a,n){var t=e.Event(a,n);return c.trigger(t),t},changeItem:function(e){var c,t=i.type,l=e.prop("checked");switch(t){case"single":i.value=!!l;break;case"group":if(void 0===i.value&&(i.value=[]),l)n(e.data("dt-chk"))?i.value.push(e.data("dt-chk")):i.value.push(e.data("dt-chk").value);else if(a(i.value)&&i.value.length>0){var o;o=n(e.data("dt-chk"))?i.value.indexOf(e.data("dt-chk")):i.value.indexOf(e.data("dt-chk").value),i.value.splice(o,1)}}c=n(e.data("dt-chk"))?e.data("dt-chk"):e.data("dt-chk").value,s.triggerEvent("click.checkbox",{checkedStatus:l,checkedValue:c,newValue:i.value}),s.triggerEvent("change.checkbox",{newValue:i.value})},setValue:function(){var c,l=i.$element.find('input[type="checkbox"]'),o=arguments[0];"single"===i.type?t(o)&&(c=l.prop("checked",o).siblings("em.gmi-check-label__icon"),o?c.addClass("checked"):c.removeClass("checked")):a(o)&&o.length>0&&l.each(function(){var a,t=e(this),l=t.data("dt-chk");c=t.siblings("em.gmi-check-label__icon"),a=n(l)?l:l.value,o.indexOf(a)!==-1?(t.prop("checked",!0),c.addClass("checked")):(t.prop("checked",!1),c.removeClass("checked"))}),s.triggerEvent("change.checkbox",{newValue:o}),i.value=o},reset:function(){var e=i.type,c="single"!==e&&[];i.$inputs.prop("checked",!1).siblings("em.gmi-check-label__icon").removeClass("checked"),s.triggerEvent("change.checkbox",{newValue:c}),i.value=c}};i.version="1.0.3",i.getValue=function(){return i.value},i.setValue=function(e){s.setValue(e)},i.reset=function(){s.reset()},i.disable=function(){var c,a=i.type;if("single"===a)c=void 0===arguments[0]||arguments[0];else{var t=[];i.$inputs.each(function(){var c=e(this).data("dt-chk");n(c)?t.push(c):e.isPlainObject(c)&&t.push(c.value)}),c=void 0===arguments[0]?t:arguments[0]}s.disableChkItem(c)},i.destroy=function(){s.unCreated(),s.unBindEvent(),c.removeData("checkbox")},s.init()};e.fn.checkbox=function(a){var t,i=c(arguments,1),a=a||{},s=this;return s.each(function(){var c,s=e(this).data("checkbox");if(!s){if(/destroy/.test(a))return!1;if(!n(a))return e(this).data("checkbox",s=new l(e(this),a))}s&&n(a)&&e.isFunction(c=s[a])&&(t=c.apply(s,i))}),void 0===t?s:t},e.fn.checkbox.constructor=l,Array.prototype.indexOf=function(e,c){var a=-1;c=1*c||0;for(var n=0,t=this.length;n<t;n++)if(n>=c&&this[n]===e){a=n;break}return a}},window.jQuery);